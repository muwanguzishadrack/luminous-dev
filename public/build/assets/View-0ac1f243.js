import{_ as E}from"./App-e1e30c83.js";import{r as b,O as F,o as n,c as d,a as e,w as J,v as H,u as M,b as S,h as a,f as i,g as m,t,F as N,d as j,e as L,n as q,l as A,i as I}from"./app-d65cc6ad.js";/* empty css              */import{d as P}from"./debounce-0382ca79.js";import{_ as U}from"./Modal-065093c0.js";import{_ as Z}from"./Table-b881dd59.js";import{T as G,a as K,_ as w}from"./TableHeaderRowItem-3d0671a2.js";import{T as Q,a as W,_ as x}from"./TableBodyRowItem-e958b373.js";import{_ as X}from"./WhatsappTemplate-4ed1ed14.js";import"./Sidebar-997904e5.js";import"./Menu-cd34a12e.js";import"./ProfileModal-0c6a0985.js";import"./FormInput-cef6e779.js";import"./FormPhoneInput-44492bbe.js";/* empty css                      */import"./FormSelect-149292fa.js";import"./index-a4420621.js";import"./hidden-7933a274.js";import"./use-text-value-16cd3154.js";import"./transition-ff0cbc41.js";import"./micro-task-89dcd6af.js";import"./tabs-d7e92053.js";import"./LangToggle-cadbcda9.js";import"./index-edb120b5.js";import"./MobileSidebar-1903fd0f.js";import"./pusher-168f4b4b.js";import"./_baseGetTag-670fd5c8.js";import"./Pagination-bcad5152.js";import"./_plugin-vue_export-helper-c27b6911.js";const Y={class:"bg-white flex items-center shadow-sm h-10 w-80 rounded-[0.5rem] mb-6 text-sm"},ee=e("span",{class:"pl-3"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m15 15l6 6m-11-4a7 7 0 1 1 0-14a7 7 0 0 1 0 14Z"})])],-1),te=["placeholder"],se=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10s10-4.5 10-10S17.5 2 12 2zm3.7 12.3c.4.4.4 1 0 1.4c-.4.4-1 .4-1.4 0L12 13.4l-2.3 2.3c-.4.4-1 .4-1.4 0c-.4-.4-.4-1 0-1.4l2.3-2.3l-2.3-2.3c-.4-.4-.4-1 0-1.4c.4-.4 1-.4 1.4 0l2.3 2.3l2.3-2.3c.4-.4 1-.4 1.4 0c.4.4.4 1 0 1.4L13.4 12l2.3 2.3z"})],-1),ae=[se],oe={key:1,class:"pr-2"},le=A('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="0 12 12;90 12 12;180 12 12;270 12 12"></animateTransform><animate attributeName="opacity" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" begin="0.2s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="30 12 12;120 12 12;210 12 12;300 12 12"></animateTransform><animate attributeName="opacity" begin="0.2s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" begin="0.4s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="60 12 12;150 12 12;240 12 12;330 12 12"></animateTransform><animate attributeName="opacity" begin="0.4s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle></svg>',1),ie=[le],re={key:0,class:"border-b border-dashed border-black"},ne={key:1,class:"border-b border-dashed border-black"},de=["onClick"],ce=e("svg",{class:"mr-1",xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24"},[e("g",{fill:"currentColor"},[e("path",{d:"M11 10.98a1 1 0 1 1 2 0v6a1 1 0 1 1-2 0zm1-4.929a1 1 0 1 0 0 2a1 1 0 0 0 0-2"}),e("path",{"fill-rule":"evenodd",d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10s10-4.477 10-10S17.523 2 12 2M4 12a8 8 0 1 0 16 0a8 8 0 0 0-16 0","clip-rule":"evenodd"})])],-1),ue={class:"max-w-md w-full space-y-8"},me={class:"mt-8 space-y-2"},pe={class:"text-sm border-b pb-2"},he={class:"flex items-center capitalize"},_e=e("svg",{class:"mr-1",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"m1.75 9.75l2.5 2.5m3.5-4l2.5-2.5m-4.5 4l2.5 2.5l6-6.5"})],-1),fe={key:1},ge={class:"text-sm mb-3 bg-red-800 p-2 rounded text-white"},ve={key:0,class:"text-sm"},be={key:1},we={class:"mt-5 grid grid-cols-1 gap-x-6 gap-y-4"},xe={class:"mt-2 w-full"},$e={__name:"CampaignLogTable",props:{rows:{type:Object,required:!0},filters:{type:Object},uuid:{type:String}},emits:["delete"],setup(g,{emit:o}){const l=g,p=b({search:l.filters.search}),c=b(null),h=b(null),_=b(!1),f=b(!1),$=()=>{p.value.search=null,O()},B=P(()=>{f.value=!0,O()},1e3),O=()=>{F.visit("/campaigns/"+l.uuid,{method:"get",data:p.value})},R=(r,u)=>{h.value=r,c.value=u,_.value=!0},D=r=>JSON.parse(r).status,y=r=>JSON.parse(r);return(r,u)=>(n(),d(N,null,[e("div",Y,[ee,J(e("input",{onInput:u[0]||(u[0]=(...s)=>M(B)&&M(B)(...s)),"onUpdate:modelValue":u[1]||(u[1]=s=>p.value.search=s),type:"text",class:"outline-none px-4 w-full",placeholder:r.$t("Search campaigns")},null,40,te),[[H,p.value.search]]),f.value===!1&&p.value.search?(n(),d("button",{key:0,onClick:$,type:"button",class:"pr-2"},ae)):S("",!0),f.value?(n(),d("span",oe,ie)):S("",!0)]),a(Z,{rows:g.rows},{default:i(()=>[a(G,null,{default:i(()=>[a(K,null,{default:i(()=>[a(w,{position:"first",class:"hidden sm:table-cell"},{default:i(()=>[m(t(r.$t("Contact")),1)]),_:1}),a(w,null,{default:i(()=>[m(t(r.$t("Phone")),1)]),_:1}),a(w,{class:"hidden sm:table-cell"},{default:i(()=>[m(t(r.$t("Last updated")),1)]),_:1}),a(w,null,{default:i(()=>[m(t(r.$t("Status")),1)]),_:1}),a(w,{position:"last"})]),_:1})]),_:1}),a(Q,null,{default:i(()=>[(n(!0),d(N,null,j(g.rows.data,(s,k)=>(n(),L(W,{key:k},{default:i(()=>[a(x,{position:"first",class:"hidden sm:table-cell"},{default:i(()=>[m(t(s.contact.full_name),1)]),_:2},1024),a(x,null,{default:i(()=>[m(t(s.contact.phone),1)]),_:2},1024),a(x,{class:"hidden sm:table-cell"},{default:i(()=>[s.status==="success"?(n(),d("span",re,t(s.chat.created_at),1)):(n(),d("span",ne,t(s.created_at),1))]),_:2},1024),a(x,null,{default:i(()=>[e("span",{class:q(["px-2 py-1 text-xs rounded-md capitalize",s.status==="success"?"bg-green-700 text-white":"bg-red-400 text-white"])},t(s.status==="success"?s.chat.status:s.status),3)]),_:2},1024),a(x,null,{default:i(()=>[e("div",{onClick:C=>{var v;return R(s.status,s.status==="success"?(v=s.chat)==null?void 0:v.logs:s.metadata)},class:"flex items-center underline cursor-pointer"},[ce,e("span",null,t(r.$t("More info")),1)],8,de)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["rows"]),a(U,{label:r.$t("Message info"),isOpen:_.value},{default:i(()=>{var s,k,C,v,V,z;return[e("div",ue,[e("div",me,[h.value==="success"?(n(!0),d(N,{key:0},j(c.value,(T,st)=>(n(),d("div",pe,[e("div",he,[_e,e("span",null,t(r.$t(D(T.metadata))),1)]),e("div",null,t(T.created_at),1)]))),256)):h.value==="failed"?(n(),d("div",fe,[e("div",ge,"Error: "+t(y(c.value).data.error.message),1),(C=(k=(s=y(c.value).data)==null?void 0:s.error)==null?void 0:k.error_data)!=null&&C.details?(n(),d("div",ve,t((z=(V=(v=y(c.value).data)==null?void 0:v.error)==null?void 0:V.error_data)==null?void 0:z.details),1)):(n(),d("div",be,t(y(c.value).data.error.message),1))])):S("",!0)])]),e("div",we,[e("div",xe,[e("button",{type:"button",onClick:u[2]||(u[2]=T=>_.value=!1),class:"inline-flex float-right justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},t(r.$t("Close")),1)])])]}),_:1},8,["label","isOpen"])],64))}},ye={class:"p-4 md:p-8 rounded-[5px] h-full overflow-y-auto capitalize"},ke={class:"flex justify-between"},Ce={class:"text-xl mb-1"},Te={class:"mb-6 flex items-center text-sm leading-6"},Se={class:"ml-1 mt-1"},Ne={class:"space-x-2"},Me=["href"],Be={class:"md:flex md:space-x-4"},Oe={class:"md:w-[70%]"},Ve={class:"flex w-[100%] mb-8 rounded-lg"},ze={class:"w-full rounded-tl-lg rounded-bl-lg text-center bg-white py-8 border"},je={class:"text-xl"},Le={class:"text-sm"},Re={class:"w-full text-center bg-white py-8 border"},De={class:"text-xl"},Ee={class:"text-sm"},Fe={class:"w-full text-center bg-white py-8 border"},Je={class:"text-xl"},He={class:"text-sm"},qe={class:"w-full bg-white text-center py-8 border"},Ae={class:"text-xl"},Ie={class:"text-sm"},Pe={class:"w-full rounded-tr-lg rounded-br-lg bg-white text-center py-8 border"},Ue={class:"text-xl"},Ze={class:"text-sm"},Ge={class:"md:w-[30%]"},Ke={class:"w-full rounded-lg bg-white pt-4 pb-8 border px-4 space-y-1"},Qe={class:"mb-2"},We={class:"text-sm bg-slate-100 p-3 rounded-lg"},Xe={class:"text-sm bg-slate-100 p-3 rounded-lg"},Ye={class:"text-sm bg-slate-100 p-3 rounded-lg"},et={class:"text-sm bg-slate-100 p-3 rounded-lg"},tt={class:"w-full rounded-lg p-5 mt-5 border chat-bg"},Vt={__name:"View",props:["campaign","rows","filters"],setup(g){const o=g;return(l,p)=>(n(),L(E,null,{default:i(()=>{var c,h,_,f,$;return[e("div",ye,[e("div",ke,[e("div",null,[e("h2",Ce,t(l.$t("Campaign details")),1),e("p",Te,[e("span",Se,t(l.$t("Ref"))+": "+t(o.campaign.uuid),1)])]),e("div",Ne,[e("a",{href:"/campaigns/export/"+o.campaign.uuid,class:"rounded-md bg-primary hover:bg-secondary px-3 py-2 text-sm text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary"},t(l.$t("Export as CSV")),9,Me),a(M(I),{href:"/campaigns",class:"rounded-md bg-slate-200 hover:bg-slate-300 px-3 py-2 text-sm text-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary"},{default:i(()=>[m(t(l.$t("Back")),1)]),_:1})])]),e("div",Be,[e("div",Oe,[e("div",Ve,[e("div",ze,[e("h2",je,t(o.campaign.total_message_count),1),e("h4",Le,t(l.$t("Messages")),1)]),e("div",Re,[e("h2",De,t(o.campaign.total_sent_count),1),e("h4",Ee,t(l.$t("Sent")),1)]),e("div",Fe,[e("h2",Je,t(o.campaign.total_delivered_count),1),e("h4",He,t(l.$t("Delivered")),1)]),e("div",qe,[e("h2",Ae,t(o.campaign.total_read_count),1),e("h4",Ie,t(l.$t("Read")),1)]),e("div",Pe,[e("h2",Ue,t(o.campaign.total_failed_count),1),e("h4",Ze,t(l.$t("Failed")),1)])]),a($e,{rows:o.rows,filters:o.filters,uuid:o.campaign.uuid},null,8,["rows","filters","uuid"])]),e("div",Ge,[e("div",Ke,[e("h2",Qe,t(l.$t("Campaign details")),1),e("div",We,[e("h3",null,t(l.$t("Campaign name")),1),e("p",null,t((c=o.campaign)==null?void 0:c.name),1)]),e("div",Xe,[e("h3",null,t(l.$t("Template")),1),e("p",null,t((_=(h=o.campaign)==null?void 0:h.template)==null?void 0:_.name),1)]),e("div",Ye,[e("h3",null,t(l.$t("Recipients")),1),e("p",null,t(o.campaign.contact_group_id==="0"?"All Contacts":($=(f=o.campaign)==null?void 0:f.contact_group)==null?void 0:$.name),1)]),e("div",et,[e("h3",null,t(l.$t("Time scheduled")),1),e("p",null,t(o.campaign.scheduled_at),1)])]),e("div",tt,[a(X,{parameters:JSON.parse(o.campaign.metadata),placeholder:!1,visible:!0},null,8,["parameters"])])])])])]}),_:1}))}};export{Vt as default};
