import{m as y,r as d,T as g,e as O,f as _,o as i,a as t,t as s,u as a,c as r,F as T,d as D,h as b,j as f,n as k,g as F,K as C}from"./app-d65cc6ad.js";import Y from"./App-9c5d0f61.js";import{_ as $}from"./Modal-065093c0.js";import{P as W}from"./Pagination-bcad5152.js";import"./App-234a23c6.js";import"./Sidebar-07d71b9c.js";import"./Menu-1750e8ba.js";import"./ProfileModal-0c6a0985.js";import"./FormInput-cef6e779.js";import"./FormPhoneInput-44492bbe.js";/* empty css                      */import"./FormSelect-149292fa.js";import"./index-a4420621.js";import"./hidden-7933a274.js";import"./use-text-value-16cd3154.js";import"./transition-ff0cbc41.js";import"./micro-task-89dcd6af.js";import"./tabs-d7e92053.js";import"./LangToggle-cadbcda9.js";import"./MobileSidebar-5390b0de.js";import"./index-edb120b5.js";/* empty css              */import"./Sidebar-23e73abe.js";import"./_plugin-vue_export-helper-c27b6911.js";const q={class:"text-xl mb-6"},K={class:"bg-white border px-2 py-2 rounded-md mb-8"},P={class:"text-sm mb-2"},R={class:"text-sm"},z={class:"text-sm flex items-center gap-x-4 mb-2"},E=["disabled"],I={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},G=t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),H=t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),J=[G,H],Q={key:1},X={key:0,class:"mb-8"},tt={class:"flex items-center text-sm"},et=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1),st={class:"ml-1 mt-1"},ot={key:1},it=t("div",{class:"flex items-center gap-x-1 text-sm bg-orange-100 py-3 px-2 rounded-md mb-4"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})]),t("span",null,[t("b",null,"Important:"),F(" Before updating backup your database and files")])],-1),nt={class:"bg-white text-sm flex items-center justify-between border rounded-md px-2 py-2 mb-6"},rt={class:"flex items-center gap-x-2"},at=["src"],lt=t("h2",{class:"text-xl mb-2"},"Addons",-1),dt={key:2,class:"flex items-center text-sm mb-4"},ct=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1),pt={class:"ml-1 mt-1"},ut={key:3,class:"grid grid-cols-2 gap-x-4 gap-y-1"},mt={class:"bg-white text-sm flex items-center justify-between border rounded-md px-2 py-2"},ht={class:"flex items-center gap-x-2"},ft=["src","alt"],vt=["onClick"],gt={class:"grid grid-cols-1 gap-x-6 gap-y-4"},_t={class:"bg-slate-50 mx-[-30px] px-6 mt-[-25px] py-4 border-b"},bt={class:"flex items-center gap-x-3"},xt=["src"],wt={class:"text-[16px]"},yt={class:"text-[17px] text-gray-800 mb-2"},kt={class:"text-sm"},Ct={class:"mt-3 border-t pt-5 flex"},$t=["disabled"],At={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},Zt=t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),Mt=t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),St=[Zt,Mt],Bt={key:1},Vt={class:"grid grid-cols-1 gap-x-6 gap-y-4"},jt={class:"bg-slate-50 mx-[-30px] px-6 mt-[-25px] py-4 border-b"},Ut={class:"flex items-center gap-x-3"},Nt={class:"text-[16px]"},Lt={class:"text-sm"},Ot={class:"mt-3 border-t pt-5 flex"},Tt=["disabled"],Dt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},Ft=t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),Yt=t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),Wt=[Ft,Yt],qt={key:1},he={__name:"Updates",props:{config:{type:Object,required:!0},rows:{type:Array,required:!0}},setup(c){const A=c,Z=y(()=>C().props.applicationVersion),M=y(()=>C().props.applicationReleaseDate),x=d(null),w=d(null),S=d(null),B=d(!1),p=d(!1),u=d(!1),m=e=>{const o=A.config.find(n=>n.key===e);return o?o.value:""},l=g({uuid:null,purchase_code:null,addon:null}),h=g({update:!0}),v=g({checkUpdate:!0}),V=()=>{p.value=!0},j=e=>{x.value=e.logo,w.value=e.name,S.value=e.description,l.uuid=e.uuid,l.addon=e.name,u.value=!0},U=()=>{l.post("/admin/addons/update",{preserveScroll:!0,onSuccess:()=>{u.value=!1}})},N=()=>{h.post("/admin/update",{preserveScroll:!0,onSuccess:()=>{p.value=!1}})},L=()=>{v.get("/admin/updates/check",{preserveScroll:!0,onSuccess:()=>{B.value=!1}})};return(e,o)=>(i(),O(Y,null,{default:_(()=>[t("div",null,[t("h2",q,s(e.$t("Swiftchats Updates")),1),t("div",K,[t("div",P,"Current Version: v"+s(Z.value),1),t("div",R,"Released Date: "+s(M.value),1)]),t("div",z,[t("span",null,"Last checked on "+s(m("last_update_check")),1),t("button",{onClick:o[0]||(o[0]=n=>L()),disabled:a(v).processing,class:"border px-2 py-1 text-sm rounded-md bg-primary text-white"},[a(v).processing?(i(),r("svg",I,J)):(i(),r("span",Q,"Check Again"))],8,E)]),m("is_update_available")==0?(i(),r("div",X,[t("p",tt,[et,t("span",st,s(e.$t("You have installed the latest version of Swiftchats")),1)])])):(i(),r("div",ot,[it,t("div",nt,[t("div",rt,[t("img",{class:"h-5 w-full",src:"/images/logo.png",alt:"Swiftchats Logo"},null,8,at),t("span",null,"v"+s(m("available_version")),1)]),t("button",{onClick:o[1]||(o[1]=n=>V()),class:"border rounded-md px-4 py-1"},s(e.$t("Update to version")+" "+m("available_version")),1)])])),lt,c.rows.data.length==0?(i(),r("p",dt,[ct,t("span",pt,s(e.$t("Your addons are all upto date.")),1)])):(i(),r("div",ut,[(i(!0),r(T,null,D(c.rows.data,n=>(i(),r("div",mt,[t("div",ht,[t("img",{class:"h-8 w-8",src:"/images/"+n.logo,alt:n.name},null,8,ft),t("span",null,s(n.name),1)]),t("button",{onClick:Kt=>j(n),class:"border rounded-md px-4 py-1"},"Update",8,vt)]))),256))])),b(W,{class:"mt-3",pagination:c.rows.meta},null,8,["pagination"])]),b($,{isOpen:u.value},{default:_(()=>[t("div",gt,[t("div",_t,[t("div",bt,[t("div",null,[t("img",{class:"h-8 w-8",src:"/images/"+x.value,alt:"Whatsapp Logo"},null,8,xt)]),t("div",wt,s(e.$t(w.value)),1)])]),t("form",{onSubmit:o[3]||(o[3]=f(n=>U(),["prevent"]))},[t("div",null,[t("div",yt,s(e.$t("Update module")),1),t("h4",kt,s(e.$t("A new version is available. Would you like to proceed with updating the module?")),1)]),t("div",Ct,[t("button",{type:"button",onClick:o[2]||(o[2]=f(n=>u.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},s(e.$t("No, not now")),1),t("button",{class:k(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":a(l).processing}]),disabled:a(l).processing},[a(l).processing?(i(),r("svg",At,St)):(i(),r("span",Bt,s(e.$t("Yes, run the update")),1))],10,$t)])],32)])]),_:1},8,["isOpen"]),b($,{isOpen:p.value},{default:_(()=>[t("div",Vt,[t("div",jt,[t("div",Ut,[t("div",Nt,s(e.$t("Update to the latest version")),1)])]),t("form",{onSubmit:o[5]||(o[5]=f(n=>N(),["prevent"]))},[t("div",null,[t("h4",Lt,s(e.$t("Would you like to proceed with updating Swiftchats?")),1)]),t("div",Ot,[t("button",{type:"button",onClick:o[4]||(o[4]=f(n=>p.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},s(e.$t("No, not now")),1),t("button",{class:k(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":a(h).processing}]),disabled:a(h).processing},[a(h).processing?(i(),r("svg",Dt,Wt)):(i(),r("span",qt,s(e.$t("Yes, run the update")),1))],10,Tt)])],32)])]),_:1},8,["isOpen"])]),_:1}))}};export{he as default};
