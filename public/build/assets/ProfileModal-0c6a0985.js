import{r as D,K as _,T as w,o as m,e as V,f as l,h as r,u as e,a as t,t as u,n as i,b as x,j as k,c as b,g as N,O}from"./app-d65cc6ad.js";import{_ as g}from"./FormInput-cef6e779.js";import{_ as G}from"./FormPhoneInput-44492bbe.js";import{_ as P}from"./FormSelect-149292fa.js";import{h as Z,G as q,U as I,S as L}from"./transition-ff0cbc41.js";import{x as J,I as K,y as C,S as H,g as $}from"./tabs-d7e92053.js";const W=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),X={class:"fixed inset-0 overflow-y-auto"},Y={class:"flex min-h-full items-center justify-center p-4 text-center"},ee={class:"text-base text-xl leading-7 text-gray-900"},te={class:"mb-4 text-sm leading-6 text-gray-600"},se={class:"mt-5 grid grid-cols-1 gap-x-6 gap-y-4"},oe={class:"mt-4 flex"},ae=["disabled"],re={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},ne=t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),le=t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),ie=[ne,le],de={key:1},ue={class:"mt-5 grid grid-cols-1 gap-x-6 gap-y-4"},me={class:"mt-4 flex"},ce=["disabled"],pe={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},fe=t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),be=t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),ge=[fe,be],he={key:1},ve={key:0,class:"mt-2 text-sm text-green-700"},ye=t("b",null,"enabled",-1),_e={class:"relative mt-4"},we={key:0,class:"absolute inset-0 backdrop-blur-sm"},xe=t("h3",{class:"font-semibold"},"1. Scan QR Code",-1),Ve=t("p",{class:"text-gray-600 text-sm"}," Open the authentication app (ex: Authy, Google Authenticator) on your mobile device and scan the following QR Code with your camera. ",-1),ke={class:"flex items-center text-sm"},Ce={class:"mb-6 md:mb-0 md:mr-2"},$e=["src"],Ae=t("label",null,"Can't scan the QR Code?",-1),Se=t("p",{class:"text-gray-600 text-sm"}," Try inserting the following secret code into your app if you can't scan the QR Code. ",-1),ze={class:"h5 text-sm mt-3"},Ue=t("h3",{class:"font-semibold"}," 2. Enter Token from Authenticator App ",-1),Te=t("p",{class:"text-sm text-gray-600 mb-2"}," To confirm that you setup your code properly, please enter the 6-digit token from your mobile app. ",-1),je={class:"mt-4 flex"},Me=["disabled"],Ne={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},Oe=t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),Ze=t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),Be=[Oe,Ze],Fe={key:1},qe={__name:"ProfileModal",props:{user:Object,organization:Object,role:String,isOpen:Boolean},emits:["close"],setup(A,{emit:B}){var S,z,U,T,j,M;const c=A,n=D(!1),h=(a,o)=>{if(a){const s=JSON.parse(a);return(s==null?void 0:s[o])??null}else return null};_().props.config;const d=w({first_name:c.user.first_name,last_name:c.user.last_name,email:c.user.email,phone:c.user.phone});w({organization_name:(S=c.organization)==null?void 0:S.name,address:h((z=c.organization)==null?void 0:z.address,"street"),city:h((U=c.organization)==null?void 0:U.address,"city"),state:h((T=c.organization)==null?void 0:T.address,"state"),zip:h((j=c.organization)==null?void 0:j.address,"zip"),country:h((M=c.organization)==null?void 0:M.address,"country")});const p=w({old_password:null,password:null,password_confirmation:null}),f=w({status:_().props.tfa.enabled,token:null,secret:_().props.tfa.secret}),v=_().props.tfa,F=async a=>{n.value=!0,d.put("/profile/",{preserveScroll:!0,onFinish:()=>{n.value=!1}})},E=async a=>{n.value=!0,p.put("/profile/password",{preserveScroll:!0,onFinish:()=>{n.value=!1}})},Q=async a=>{n.value=!0,f.put("/profile/tfa",{preserveScroll:!0,onFinish:()=>{n.value=!1},onSuccess:()=>{O.visit(O.page.url)}})},R=B;function y(){R("close",!0)}return(a,o)=>(m(),V(e(L),{appear:"",show:A.isOpen,as:"template"},{default:l(()=>[r(e(I),{as:"div",onClose:y,class:"relative z-10"},{default:l(()=>[r(e(Z),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[W]),_:1}),t("div",X,[t("div",Y,[r(e(Z),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[r(e(q),{class:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all min-w-[20em]"},{default:l(()=>[t("div",null,[t("h2",ee,u(a.$t("Personal information")),1),t("p",te,u(a.$t("Update your account details and credentials")),1),r(e(J),null,{default:l(()=>[r(e(K),{class:"flex space-x-1 rounded-xl bg-primary p-1"},{default:l(()=>[r(e(C),{as:"template"},{default:l(({selected:s})=>[t("button",{class:i(["w-full rounded-lg py-2.5 text-sm leading-5 text-[#ffffffcc]","ring-white focus:outline-none",s?"bg-white text-black shadow":"hover:bg-white hover:text-black"])},u(a.$t("My profile")),3)]),_:1}),r(e(C),{as:"template"},{default:l(({selected:s})=>[t("button",{class:i(["w-full rounded-lg py-2.5 text-sm leading-5 text-[#ffffffcc]","ring-white focus:outline-none",s?"bg-white text-black shadow":"hover:bg-white hover:text-black"])},u(a.$t("Security")),3)]),_:1}),e(v).status?(m(),V(e(C),{key:0,as:"template"},{default:l(({selected:s})=>[t("button",{class:i(["w-full rounded-lg py-2.5 text-sm leading-5 text-[#ffffffcc]","ring-white focus:outline-none",s?"bg-white text-black shadow":"hover:bg-white hover:text-black"])},u(a.$t("Two-Factor")),3)]),_:1})):x("",!0)]),_:1}),r(e(H),{class:"mt-2"},{default:l(()=>[r(e($),null,{default:l(()=>[t("div",se,[t("form",{onSubmit:o[4]||(o[4]=k(s=>F(),["prevent"])),class:"grid gap-x-6 gap-y-4 sm:grid-cols-6"},[r(g,{modelValue:e(d).first_name,"onUpdate:modelValue":o[0]||(o[0]=s=>e(d).first_name=s),name:a.$t("First name"),error:e(d).errors.first_name,type:"text",class:i("sm:col-span-3")},null,8,["modelValue","name","error"]),r(g,{modelValue:e(d).last_name,"onUpdate:modelValue":o[1]||(o[1]=s=>e(d).last_name=s),name:a.$t("Last name"),error:e(d).errors.last_name,type:"text",class:i("sm:col-span-3")},null,8,["modelValue","name","error"]),r(g,{modelValue:e(d).email,"onUpdate:modelValue":o[2]||(o[2]=s=>e(d).email=s),name:a.$t("Email"),error:e(d).errors.email,type:"text",class:i("sm:col-span-6")},null,8,["modelValue","name","error"]),r(G,{modelValue:e(d).phone,"onUpdate:modelValue":o[3]||(o[3]=s=>e(d).phone=s),name:a.$t("Phone"),error:e(d).errors.phone,type:"text",class:i("sm:col-span-6")},null,8,["modelValue","name","error"]),t("div",oe,[t("button",{type:"button",onClick:y,class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},u(a.$t("Cancel")),1),t("button",{class:i(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":n.value}]),disabled:n.value},[n.value?(m(),b("svg",re,ie)):(m(),b("span",de,u(a.$t("Save")),1))],10,ae)])],32)])]),_:1}),r(e($),null,{default:l(()=>[t("div",ue,[t("form",{onSubmit:o[8]||(o[8]=k(s=>E(),["prevent"])),class:"grid gap-x-6 gap-y-4 sm:grid-cols-6"},[r(g,{modelValue:e(p).old_password,"onUpdate:modelValue":o[5]||(o[5]=s=>e(p).old_password=s),name:a.$t("Old password"),error:e(p).errors.old_password,type:"password",class:i("sm:col-span-6")},null,8,["modelValue","name","error"]),r(g,{modelValue:e(p).password,"onUpdate:modelValue":o[6]||(o[6]=s=>e(p).password=s),name:a.$t("New password"),error:e(p).errors.password,type:"password",class:i("sm:col-span-6")},null,8,["modelValue","name","error"]),r(g,{modelValue:e(p).password_confirmation,"onUpdate:modelValue":o[7]||(o[7]=s=>e(p).password_confirmation=s),name:a.$t("Confirm password"),error:e(p).errors.password_confirmation,type:"password",class:i("sm:col-span-6")},null,8,["modelValue","name","error"]),t("div",me,[t("button",{type:"button",onClick:y,class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},u(a.$t("Cancel")),1),t("button",{class:i(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":n.value}]),disabled:n.value},[n.value?(m(),b("svg",pe,ge)):(m(),b("span",he,u(a.$t("Save")),1))],10,ce)])],32)])]),_:1}),e(v).status?(m(),V(e($),{key:0},{default:l(()=>[t("form",{onSubmit:o[11]||(o[11]=k(s=>Q(),["prevent"]))},[r(P,{name:"Two-factor authentication",modelValue:e(f).status,"onUpdate:modelValue":o[9]||(o[9]=s=>e(f).status=s),options:[{value:1,label:"Enable"},{value:0,label:"Disable"}],error:e(f).errors.status},null,8,["modelValue","error"]),e(v).enabled===1?(m(),b("div",ve,[N(" Two-factor authentication is "),ye,N(". ")])):x("",!0),t("div",_e,[e(f).status===0?(m(),b("div",we)):x("",!0),xe,Ve,t("div",ke,[t("div",Ce,[t("img",{src:e(v).qrcode,alt:"qrcode",width:"200"},null,8,$e)]),t("div",null,[Ae,Se,t("p",ze,u(e(v).secret),1)])]),Ue,Te,r(g,{modelValue:e(f).token,"onUpdate:modelValue":o[10]||(o[10]=s=>e(f).token=s),placeholder:"6 digit code",error:e(f).errors.token,type:"text",class:i("sm:col-span-6")},null,8,["modelValue","error"])]),t("div",je,[t("button",{type:"button",onClick:y,class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},u(a.$t("Cancel")),1),t("button",{class:i(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":n.value}]),disabled:n.value},[n.value?(m(),b("svg",Ne,Be)):(m(),b("span",Fe,u(a.$t("Save")),1))],10,Me)])],32)]),_:1})):x("",!0)]),_:1})]),_:1})])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}};export{qe as _};
